name: FitBot (daily)

on:
  schedule:
    - cron: "55 7 * * *"      # 09:55 Madrid (CEST=UTC+2)
    - cron: "0-30/5 8 * * *"  # 10:00..10:30 Madrid, cada 5 min
  workflow_dispatch:

jobs:
  book:
    runs-on: ubuntu-latest
    steps:
      - name: Run FitBot in Docker (CLI flags)
        run: |
          docker run --rm pablobuenaposada/fitbot \
            --email "${{ secrets.AH_EMAIL }}" \
            --password "${{ secrets.AH_PASSWORD }}" \
            --booking-goals '${{ secrets.BOOKING_GOALS_ESCAPED }}' \
            --box-name "${{ secrets.BOX_NAME }}" \
            --box-id "${{ secrets.BOX_ID }}" \
            --days-in-advance "${{ secrets.DAYS_IN_ADVANCE }}" \
            ${ { secrets.FAMILY_ID && format('--family-id "{0}"', secrets.FAMILY_ID) || '' } } \
            ${ { secrets.PROXY && format('--proxy "{0}"', secrets.PROXY) || '' } }
